# nanobot-go

<p align="center">
  <img src="https://img.shields.io/badge/Go-1.26+-00ADD8?style=for-the-badge&logo=go" alt="Go Version">
  <img src="https://img.shields.io/badge/CloudWeGo-Eino-blue?style=for-the-badge" alt="Eino Framework">
  <img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" alt="License">
</p>

## é¡¹ç›®ç®€ä»‹

nanobot-go æ˜¯ä¸€ä¸ªåŸºäº [CloudWeGo Eino](https://github.com/cloudwego/eino) æ¡†æ¶æ„å»ºçš„è½»é‡çº§ AI ä¸ªäººåŠ©ç†ã€‚åŸºäº [nanobot](https://github.com/hkuds/nanobot) çš„ Go è¯­è¨€é‡å†™ç‰ˆæœ¬ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„ Agent æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯æ¸ é“å’Œä¸°å¯Œçš„å·¥å…·èƒ½åŠ›ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤š Agent æ¶æ„**ï¼šåŸºäº Supervisor æ¨¡å¼çš„æ™ºèƒ½è·¯ç”±ï¼Œæ”¯æŒ ReActã€Planã€Chat ç­‰å¤šç§å­ Agent
- ğŸ“± **å¤šæ¸ é“æ”¯æŒ**ï¼šæ”¯æŒ Matrixã€é’‰é’‰ã€é£ä¹¦ã€WebSocketã€CLI ç­‰å¤šç§æ¶ˆæ¯æ¸ é“
- ğŸ”Œ **ä¸°å¯Œçš„å·¥å…·**ï¼šå†…ç½®æ–‡ä»¶æ“ä½œã€Web æœç´¢ã€ä»£ç æ‰§è¡Œã€æŠ€èƒ½ç³»ç»Ÿç­‰å·¥å…·
- â° **å®šæ—¶ä»»åŠ¡**ï¼šæ”¯æŒ Cron è¡¨è¾¾å¼å®šæ—¶æ‰§è¡Œä»»åŠ¡
- ğŸ’“ **å¿ƒè·³æœåŠ¡**ï¼šå®šæ—¶æ£€æŸ¥ä»»åŠ¡æ–‡ä»¶å¹¶æ‰§è¡Œ
- ğŸ’¾ **ä»»åŠ¡æŒä¹…åŒ–**ï¼šä»»åŠ¡çŠ¶æ€è‡ªåŠ¨æŒä¹…åŒ–åˆ°æ–‡ä»¶ç³»ç»Ÿ

## æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| ç¼–ç¨‹è¯­è¨€ | Go 1.26+ |
| Agent æ¡†æ¶ | CloudWeGo Eino |
| é…ç½®æ ¼å¼ | JSON / YAML |
| æ—¥å¿— | Uber Zap |
| å‘½ä»¤è¡Œ | Cobra |

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ¶ˆæ¯ (å¤šæ¸ é“)                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚  Matrix  â”‚  â”‚ DingTalk â”‚  â”‚  WebSocketâ”‚  â”‚   CLI   â”‚  ...  â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚            â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ¶ˆæ¯æ€»çº¿ (MessageBus)                       â”‚
â”‚                    ç»Ÿä¸€çš„æ¶ˆæ¯åˆ†å‘ä¸è®¢é˜…æœºåˆ¶                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supervisor Agent (å…¥å£)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   æ„å›¾è¯†åˆ«ä¸æ™ºèƒ½è·¯ç”±                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReAct Agent  â”‚    â”‚  Plan Agent   â”‚    â”‚  Chat Agent   â”‚
â”‚               â”‚    â”‚               â”‚    â”‚               â”‚
â”‚ - å·¥å…·è°ƒç”¨     â”‚    â”‚ - ä»»åŠ¡è§„åˆ’     â”‚    â”‚ - é—²èŠå¯¹è¯    â”‚
â”‚ - æ¨ç†é“¾      â”‚    â”‚ - åˆ†æ­¥æ‰§è¡Œ     â”‚    â”‚ - ç®€å•é—®ç­”    â”‚
â”‚ - é•¿å¯¹è¯      â”‚    â”‚ - åŠ¨æ€é‡è§„åˆ’   â”‚    â”‚ - ä¿¡æ¯æŸ¥è¯¢    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å·¥å…·ç³»ç»Ÿ (Tools)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æ–‡ä»¶è¯»å†™  â”‚ â”‚Webæœç´¢  â”‚ â”‚ ä»£ç æ‰§è¡Œ â”‚ â”‚ å®šæ—¶ä»»åŠ¡ â”‚ â”‚ æŠ€èƒ½ç³»ç»Ÿ â”‚ ...â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

#### 1. Agent æ¨¡å— (`agent/`)
- **Supervisor**ï¼šå…¥å£å‹ Agentï¼Œè´Ÿè´£æ„å›¾è¯†åˆ«å’Œè·¯ç”±
- **ReAct Agent**ï¼šå·¥å…·è°ƒç”¨å‹ Agentï¼Œæ”¯æŒå¤æ‚çš„æ¨ç†å’Œå·¥å…·ä½¿ç”¨
- **Plan Agent**ï¼šè§„åˆ’å‹ Agentï¼Œæ”¯æŒä»»åŠ¡åˆ†è§£å’Œåˆ†æ­¥æ‰§è¡Œ
- **Chat Agent**ï¼šå¯¹è¯å‹ Agentï¼Œæ”¯æŒç®€å•é—²èŠå’Œé—®ç­”
- **Task Manager**ï¼šä»»åŠ¡ç®¡ç†å™¨ï¼Œæ”¯æŒåå°ä»»åŠ¡æ‰§è¡Œå’ŒçŠ¶æ€è·Ÿè¸ª

#### 2. æ¸ é“æ¨¡å— (`channels/`)
- **Matrix**ï¼šMatrix åè®®å³æ—¶é€šè®¯
- **DingTalk**ï¼šé’‰é’‰è‡ªå®šä¹‰æœºå™¨äºº
- **WebSocket**ï¼šWebSocket å®æ—¶é€šä¿¡
- **CLI**ï¼šå‘½ä»¤è¡Œäº¤äº’
- **Feishu**ï¼šé£ä¹¦æ¸ é“æ”¯æŒ

#### 3. å·¥å…·æ¨¡å— (`agent/tools/`)
| å·¥å…· | åŠŸèƒ½ |
|------|------|
| readfile | è¯»å–æ–‡ä»¶å†…å®¹ |
| writefile | å†™å…¥æ–‡ä»¶å†…å®¹ |
| editfile | ç¼–è¾‘æ–‡ä»¶å†…å®¹ |
| listdir | åˆ—å‡ºç›®å½•å†…å®¹ |
| exec | æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ |
| websearch | ç½‘ç»œæœç´¢ |
| webfetch | ç½‘é¡µå†…å®¹æŠ“å– |
| cron | å®šæ—¶ä»»åŠ¡ç®¡ç† |
| skill | æŠ€èƒ½ç³»ç»Ÿ |
| task | åå°ä»»åŠ¡ç®¡ç† |
| message | æ¶ˆæ¯å‘é€ |
| askuser | ç”¨æˆ·äº¤äº’ |

#### 4. å…¶ä»–æ¨¡å—
- **bus**ï¼šæ¶ˆæ¯æ€»çº¿ï¼Œè§£è€¦å„ç»„ä»¶
- **config**ï¼šé…ç½®ç®¡ç†
- **cron**ï¼šå®šæ—¶ä»»åŠ¡æœåŠ¡
- **heartbeat**ï¼šå¿ƒè·³æœåŠ¡
- **session**ï¼šä¼šè¯ç®¡ç†

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/weibaohui/nanobot-go.git
cd nanobot-go

# å®‰è£…ä¾èµ–
go mod tidy

# åˆå§‹åŒ–é…ç½®
go run . onboard
```

### å¼€å‘æ¨¡å¼

```bash
# éœ€è¦å…ˆå®‰è£… air
go install github.com/cosmtrek/air@latest

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
make dev
# æˆ–è€…ç›´æ¥è¿è¡Œ
air
```

### æ„å»º

```bash
# äº¤å‰ç¼–è¯‘åˆ°æ‰€æœ‰å¹³å°
make build

# æ¸…ç†æ„å»ºäº§ç‰©
make clean
```

### è¿è¡Œ

```bash
# å¯åŠ¨ç½‘å…³æœåŠ¡
./nanobot gateway

# æˆ–æŒ‡å®šé…ç½®æ–‡ä»¶
./nanobot gateway --config /path/to/config.yaml
```

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®

- é»˜è®¤é…ç½®ï¼š`~/.nanobot/config.yaml`
- å·¥ä½œåŒºï¼š`~/.nanobot/workspace/`

### é…ç½®ç¤ºä¾‹

```yaml
# ~/.nanobot/config.yaml
agents:
  defaults:
    workspace: ~/.nanobot/workspace
    model: anthropic/claude-opus-4-5
    maxTokens: 8192
    temperature: 0.7
    maxToolIterations: 20

channels:
  matrix:
    enabled: true
    homeserver: https://matrix.org
    userID: "@your-bot:matrix.org"
    token: "your-access-token"

  dingtalk:
    enabled: false
    clientID: "your-client-id"
    clientSecret: "your-client-secret"

providers:
  siliconflow:
    apiKey: "your-siliconflow-key"
    baseURL: "https://api.siliconflow.cn/v1"

  openai:
    apiKey: "your-openai-key"

heartbeat:
  every: "30m"          # å¿ƒè·³é—´éš”
  activeHours:          # æ´»è·ƒæ—¶æ®µï¼ˆå¯é€‰ï¼‰
    start: "09:00"
    end: "18:00"
    timezone: "Asia/Shanghai"
  target: "!room:matrix.org"  # æ¶ˆæ¯å‘é€ç›®æ ‡
  model: ""            # å¿ƒè·³ä¸“ç”¨æ¨¡å‹
  prompt: ""           # è‡ªå®šä¹‰æç¤ºè¯

tools:
  exec:
    timeout: 60        # å‘½ä»¤æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  web:
    search:
      maxResults: 5    # æœç´¢ç»“æœæœ€å¤§æ•°é‡
```
 
## ç›¸å…³æ–‡æ¡£

- [Supervisor è®¾è®¡æ–‡æ¡£](agent/supervisor_design.md)
- [ä»»åŠ¡ç®¡ç†éœ€æ±‚æ–‡æ¡£](agent/task_manager_requirements.md)

## è®¸å¯è¯

MIT License

## è‡´è°¢

- [nanobot](https://github.com/weibaohui/nanobot) - çµæ„Ÿæ¥æº
- [CloudWeGo Eino](https://github.com/cloudwego/eino) - Agent æ¡†æ¶
- [mautrix](https://github.com/mautrix/go) - Matrix SDK
